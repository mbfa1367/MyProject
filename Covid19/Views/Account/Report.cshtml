@model ReportModelView


<!DOCTYPE html>
<style>
    .my-custom-scrollbar {
        position: relative;
        overflow: auto;
        width: 300px;
    }

    .table-wrapper-scroll-y {
        display: block;
    }
</style>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <meta name="description" content="....">
    <link rel="stylesheet" href="~/css/siteHTML.css">

</head>
<body>
    <section class="content-holder ">

        <article class="content-table">

            <main id="main_content">

                <h1 id="heading">Manager Report</h1>

                <div class="row mt-5 ml-2">
                    <label>Report type:</label>
                    <select name="role" class="ml-2" id="reportDrp">
                        <option value="Monthly">Monthly</option>
                        <option value="Weekly">Weekly</option>
                        <option value="Daily">Daily</option>
                    </select>
                    <div id="dailyReportSelect" class="ml-3" style="display:none;">
                        <label>Month:</label>
                        <select name="role" class="ml-2" id="dailyDrp">
                            <option value="1">Januery</option>
                            <option value="2">Februry</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">Jun</option>
                            <option value="7">July</option>
                            <option value="8">Auguste</option>
                            <option value="9">Semtepber</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-sm ml-5" OnClick="filter();">Generate Report</button>
                </div>

                <div class="row">
                    @if (Model.monthlyReport.Count() > 0)
                    {
                        <table class="table table-striped table-wrapper-scroll-y my-custom-scrollbar w-auto small mt-5">
                            <tr>
                                <th colspan="13" style="padding:10px"><strong>Report Of Number of Patients in Month</strong></th>
                            </tr>
                            <tr>
                                <th>Month</th>
                                <th>Count</th>
                                <th>Daily report</th>
                            </tr>
                            @foreach (var item in Model.monthlyReport)
                            {
                                <tr>
                                    <td>
                                        @if (item.key == 1)
                                        {@Html.Label("Januery");
                                    }
                                    else if (item.key == 2)
                                    { @Html.Label("Februry");
                                }
                                else if (item.key == 3)
                                { @Html.Label("March");
                            }
                            else if (item.key == 4)
                            { @Html.Label("April");
                        }
                        else if (item.key == 5)
                        { @Html.Label("May");
                    }
                    else if (item.key == 6)
                    { @Html.Label("Jun");
                }
                else if (item.key == 7)
                { @Html.Label("July");
            }
            else if (item.key == 8)
            { @Html.Label("Auguste");
        }
        else if (item.key == 9)
        { @Html.Label("Semtepber");
        }
        else if (item.key == 10)
        { @Html.Label("October");
        }
        else if (item.key == 11)
        { @Html.Label("November");
        }
        else if (item.key == 12)
        { @Html.Label("December");
        }
                                    </td>
                                    <td>
                                        @item.count
                                    </td>
                                    <td>
                                        <button type="submit" class="btn btn-outline-info btn-sm" OnClick="getdayreport(@item.key);">Daily report</button>
                                    </td>
                                </tr>
                            }
                        </table>
                    }
                    @if (Model.yearlyReport.Count() > 0)
                    {
                        <table class="table table-striped table-wrapper-scroll-y my-custom-scrollbar w-auto small ml-4 mt-5">
                            <tr>
                                <th colspan="13" style="padding:10px"><strong>Daily Report Of Number of Patients @Model.MonthforDailyReport</strong></th>
                            </tr>
                            <tr>
                                <th>Day</th>
                                <th>Count</th>
                            </tr>
                            @foreach (var item in Model.yearlyReport)
                            {
                                <tr>
                                    <td>
                                        <label> Day @item.key </label>
                                    </td>
                                    <td>
                                        @item.count
                                    </td>
                                </tr>
                            }
                        </table>
                    }
                </div>
                @if (Model.weeklyReport.Count() > 0)
                {
                    <table class="table table-striped table-wrapper-scroll-y my-custom-scrollbar w-auto small mt-5">
                        <tr>
                            <th colspan="13" style="padding:10px"><strong>Report Of Number of Patients in Week</strong></th>
                        </tr>
                        <tr>
                            <th>Week</th>
                            <th>StartDate</th>
                            <th>EndDate</th>
                            <th>Count</th>

                        </tr>
                        @foreach (var item in Model.weeklyReport)
                        {
                            <tr>
                                <td>
                                    <label> Week @item.key </label>
                                </td>

                                <td>
                                    @item.startDate
                                </td>
                                <td>
                                    @item.endDate
                                </td>
                                <td>
                                    @item.count
                                </td>
                            </tr>
                        }
                    </table>
                }
                @if (Model.yearlyReport.Count() < 1 && Model.weeklyReport.Count() < 1 && Model.monthlyReport.Count() < 1)
                {
                    <label class="mt-5 "><b> Currently there is no patient requested at selected time range. </b></label>
                }
                @*<p>
            To Print the report click here
            <a href="#" onclick="handleClick()"> Print Report </a>
        </p>*@
                @*<p>
                    <a href="../Account/ManagerPage">
                        <button style="margin-top: 20px;">Back to admin Page</button>
                    </a>
                </p>*@
            </main>

        </article>


        <div class="clear"></div>

    </section>
</body>
<script type="text/javascript">
    $("#logOutdiv").show();
    $("#monitorUsers").show();
    $("#Report").show();
    $("#managerPage").show();
    $("#login").hide();
    $("#Registeration").hide();
function handleLogOutClick() {
            alert("You are successfully Log Out.");
            window.location = '@Url.Action("logOut", "Account")';

        }
    $("#reportDrp").change(function () {
        reportType = $("#reportDrp").val();
        if (reportType == 'Daily') {
            $("#dailyReportSelect").show()
        }
    });
        function filter() {
            reportType = $("#reportDrp").val();
            dailyDrp = $("#dailyDrp").val();
            dailyDrptext = $("#dailyDrp option:selected").text();
            window.location = '@Url.Action("Report", "Account")?reportType=' + reportType + '&month=' + dailyDrp + '&MonthforDailyReport=' + dailyDrptext;
        }
        function getdayreport(month) {
            window.location = '@Url.Action("Report", "Account")?reportType=Monthly&month=' + month;

                }
</script>
</html>
